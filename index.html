<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Undangan Pernikahan - Dian & Aziz</title>
    
    <!-- Memuat Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Memuat Google Fonts (Playfair Display, Lato, DAN Great Vibes) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Playfair+Display:wght@700&family=Great+Vibes&display=swap" rel="stylesheet">
    
    <!-- Memuat Firebase -->
    <script type="module">
        // Import Firebase SDKs
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, doc, setDoc, getDoc } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // Konfigurasi Firebase (menggunakan variabel global)
        const firebaseConfig = JSON.parse(typeof __firebase_config !== 'undefined' ? __firebase_config : '{}');
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';
        
        let db, auth, userId, ucapanCollectionRef;

        try {
            const app = initializeApp(firebaseConfig);
            db = getFirestore(app);
            auth = getAuth(app);

            // Inisialisasi Autentikasi
            initAuth();
            
        } catch (e) {
            console.error("Error initializing Firebase: ", e);
        }

        async function initAuth() {
            onAuthStateChanged(auth, (user) => {
                if (user) {
                    // User sudah login
                    userId = user.uid;
                    console.log("User authenticated:", userId);
                    // Setelah user ID didapat, siapkan referensi koleksi dan muat data
                    setupCollectionRefs();
                    loadGuestbookEntries();
                } else {
                    // User belum login, coba login
                    signIn();
                }
            });
        }

        async function signIn() {
            try {
                if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                    await signInWithCustomToken(auth, __initial_auth_token);
                } else {
                    await signInAnonymously(auth);
                }
            } catch (error) {
                console.error("Error signing in: ", error);
            }
        }

        function setupCollectionRefs() {
            // Path koleksi untuk menyimpan ucapan (data publik)
            ucapanCollectionRef = collection(db, `/artifacts/${appId}/public/data/ucapan`);
        }

        // --- Fungsi Buku Tamu (Guestbook) ---

        // Fungsi untuk memuat ucapan dari Firestore
        function loadGuestbookEntries() {
            if (!ucapanCollectionRef) return;

            const guestbookEntries = document.getElementById('guestbook-entries');
            const q = query(ucapanCollectionRef); // Nanti bisa ditambah order by

            onSnapshot(q, (snapshot) => {
                guestbookEntries.innerHTML = ''; // Kosongkan dulu
                if (snapshot.empty) {
                    guestbookEntries.innerHTML = '<p class="text-brand-muted text-center italic">Jadilah yang pertama memberi ucapan!</p>';
                    return;
                }
                
                let count = 0;
                snapshot.docs.forEach(doc => {
                    const data = doc.data();
                    const entry = document.createElement('div');
                    entry.className = 'bg-white p-4 rounded-lg shadow mb-4';
                    
                    let presenceIcon = data.kehadiran === 'Hadir' 
                        ? '<span class="text-xs font-semibold bg-green-100 text-green-700 px-2 py-0.5 rounded-full ml-2">Hadir</span>'
                        : '<span class="text-xs font-semibold bg-red-100 text-red-700 px-2 py-0.5 rounded-full ml-2">Tidak Hadir</span>';

                    entry.innerHTML = `
                        <div class="flex items-center justify-between">
                            <h4 class="text-lg font-bold text-brand-primary">${data.nama || 'Anonim'}</h4>
                            ${presenceIcon}
                        </div>
                        <p class="text-brand-text mt-2">${data.ucapan || ''}</p>
                    `;
                    guestbookEntries.appendChild(entry);
                    count++;
                });
                
                // Update jumlah ucapan
                const rsvpCount = document.getElementById('rsvp-count');
                if(rsvpCount) rsvpCount.innerText = `${count} Ucapan`;

            }, (error) => {
                console.error("Error loading guestbook: ", error);
                guestbookEntries.innerHTML = '<p class="text-red-500 text-center">Gagal memuat ucapan.</p>';
            });
        }

        // Fungsi untuk menyimpan ucapan ke Firestore
        async function handleRsvpSubmit(event) {
            event.preventDefault();
            const form = event.target;
            const submitButton = form.querySelector('button[type="submit"]');
            const originalButtonText = submitButton.innerHTML;

            const nama = form.nama.value;
            const ucapan = form.ucapan.value;
            const kehadiran = form.kehadiran.value;

            if (!nama || !ucapan || !kehadiran) {
                alert("Harap isi semua kolom."); // Ganti dengan modal jika sempat
                return;
            }

            submitButton.disabled = true;
            submitButton.innerHTML = 'Mengirim...';

            try {
                await addDoc(ucapanCollectionRef, {
                    nama: nama,
                    ucapan: ucapan,
                    kehadiran: kehadiran,
                    timestamp: new Date()
                });
                form.reset();
                submitButton.innerHTML = 'Terkirim!';
                setTimeout(() => {
                    submitButton.innerHTML = originalButtonText;
                    submitButton.disabled = false;
                }, 2000);

            } catch (error) {
                console.error("Error adding document: ", error);
                submitButton.innerHTML = 'Gagal, coba lagi';
                submitButton.disabled = false;
            }
        }

        // Daftarkan listener setelah DOM siap
        document.addEventListener('DOMContentLoaded', () => {
            const rsvpForm = document.getElementById('rsvp-form');
            if (rsvpForm) {
                rsvpForm.addEventListener('submit', handleRsvpSubmit);
            }
        });

    </script>
    
    <!-- Konfigurasi Tailwind untuk font dan warna kustom -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Lato', 'sans-serif'],
                        display: ['Playfair Display', 'serif'],
                        script: ['Great Vibes', 'cursive'] // Font script baru
                    },
                    colors: {
                        // Palet warna baru (Emerald & Gold)
                        'brand': {
                            'bg': '#FBFBFB', // Latar konten (Putih Gading)
                            'primary': '#B8860B', // Emas
                            'secondary': '#004D40', // Hijau Emerald
                            'text': '#333333', // Teks Gelap
                            'muted': '#666666', // Teks Abu-abu
                        }
                    }
                }
            }
        }
    </script>
    
    <style>
        /* Style tambahan */
        body {
            font-family: 'Lato', sans-serif;
            /* Background diubah ke hijau emerald gelap */
            background-color: #002B24;
            background-image: none; /* Menghapus gambar bunga */
            background-size: cover; /* Menutupi seluruh layar */
            background-position: center; /* Posisikan di tengah */
            background-attachment: fixed; /* Tetap saat di-scroll */
        }
        .animate-fade-in {
            animation: fadeIn 1.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="flex items-center justify-center min-h-screen">

    <!-- 1. Halaman Sampul (Cover) -->
    <div id="cover" class="fixed inset-0 text-white flex flex-col items-center justify-center text-center z-50 p-8 transition-opacity duration-1000" style="background-image: url('cincin.jpg'); background-size: cover; background-position: center;">
        <div class="absolute inset-0 bg-black bg-opacity-40"></div>
        <div class="relative z-10">
            <p class="text-lg text-gray-200">The Wedding Of</p>
            <!-- Menggunakan font script dan memperbesar -->
            <h1 class="font-script text-7xl my-6">Dian & Aziz</h1>
            <div class="my-8">
                <p class="text-lg text-gray-200">Kepada Yth.</p>
                <p class="text-xl font-semibold">Bapak/Ibu/Saudara/i</p>
                <p class="text-2xl font-bold mt-2 bg-white bg-opacity-20 px-4 py-2 rounded-lg">Tamu Undangan</p>
            </div>
            <!-- Tombol disesuaikan dengan warna emerald -->
            <button id="openButton" class="mt-4 bg-white text-brand-secondary font-bold py-3 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105">
                Buka Undangan
            </button>
        </div>
    </div>

    <!-- 2. Konten Utama Undangan (Awalnya tersembunyi) -->
    <!-- 
      PERUBAHAN: 
      - 'bg-brand-bg/95' diubah menjadi 'bg-brand-bg' (solid)
      - 'backdrop-blur-sm' dihapus
    -->
    <main id="main-content" class="hidden max-w-md w-full bg-brand-bg shadow-xl overflow-hidden rounded-lg animate-fade-in">
        
        <!-- Bagian Hero -->
        <section id="hero" class="relative text-center">
            <img src="cincin.jpg" 
                 alt="Foto Dian & Aziz" 
                 onerror="this.src='cincin.jpg'">
            <div class="absolute inset-0 bg-black bg-opacity-30 flex flex-col items-center justify-center text-white p-4">
                <p class="text-lg">Kami Akan Menikah</p>
                <!-- Menggunakan font script dan memperbesar -->
                <h1 class="font-script text-7xl my-4">Dian & Aziz</h1>
                <p class="font-semibold text-xl">Sabtu, 08 November 2025</p>
            </div>
        </section>
        
        <!-- Bagian Pembuka & Mempelai -->
        <section id="mempelai" class="p-8 text-center text-brand-text">
            <p class="text-brand-muted mb-6">
                "Dan di antara tanda-tanda (kebesaran)-Nya ialah Dia menciptakan pasangan-pasangan untukmu dari jenismu sendiri, agar kamu cenderung dan merasa tenteram kepadanya, dan Dia menjadikan di antaramu rasa kasih dan sayang."
            </p>
            <p class="font-semibold">(QS. Ar-Rum: 21)</p>
            
            <div class="mt-12">
                <img src="groom.png" alt="Foto Aziz" class="w-32 h-32 rounded-full mx-auto object-cover shadow-lg border-4 border-white">
                <!-- Menggunakan font script dan memperbesar -->
                <h2 class="font-script text-5xl text-brand-primary mt-4">Muhamad Aziz</h2>
                <p class="mt-2 text-brand-muted">Putra dari Bpk. Paijo Efendi & Ibu Suyamti</p>
                
                <!-- Menggunakan font script -->
                <p class="font-script text-6xl text-brand-primary my-6">&</p>
                
                <img src="bride.png" alt="Foto Dian" class="w-32 h-32 rounded-full mx-auto object-cover shadow-lg border-4 border-white">
                <!-- Menggunakan font script dan memperbesar -->
                <h2 class="font-script text-5xl text-brand-primary mt-4">Dian Fitriani</h2>
                <p class="mt-2 text-brand-muted">Putri dari Bpk. Ruslan (alm) & Ibu Kaswati</p>
            </div>
        </section>
        
        <!-- Bagian Detail Acara -->
        <!-- 
          PERUBAHAN: 
          - 'bg-brand-secondary/95' diubah menjadi 'bg-brand-secondary' (solid, warna emerald)
          - Warna teks judul diubah ke Emas
        -->
        <section id="acara" class="bg-brand-secondary p-8 text-center">
            <h2 class="text-3xl font-display font-bold text-brand-primary mb-8">Detail Acara</h2>
            
            <!-- Akad Nikah -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                <h3 class="font-display text-4xl text-brand-primary">Tasyakuran</h3>
                <div class="flex items-center justify-center mt-4 text-brand-text">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                    <p class="font-semibold">Sabtu, 08 November 2025</p>
                </div>
                <p class="text-brand-muted">08:00 - Selesai</p>
                
                <div class="flex items-center justify-center mt-4 text-brand-text">
                    <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                    <p class="font-semibold">Perum bumi karawang permai</p>
                </div>
            </div>
        </section>
        
        <!-- Bagian Countdown Timer -->
        <section class="p-8 text-center text-brand-text">
            <h2 class="text-3xl font-display font-bold text-brand-primary mb-6">Menuju Hari Bahagia</h2>
            <div id="countdown" class="flex justify-center space-x-2 sm:space-x-4">
                <!-- Box diubah ke warna Emas, teks ke Emerald -->
                <div class="bg-brand-primary p-3 rounded-lg w-20">
                    <div id="countdown-days" class="text-3xl font-bold text-white">0</div>
                    <div class="text-sm text-gray-200">Hari</div>
                </div>
                <div class="bg-brand-primary p-3 rounded-lg w-20">
                    <div id="countdown-hours" class="text-3xl font-bold text-white">0</div>
                    <div class="text-sm text-gray-200">Jam</div>
                </div>
                <div class="bg-brand-primary p-3 rounded-lg w-20">
                    <div id="countdown-minutes" class="text-3xl font-bold text-white">0</div>
                    <div class="text-sm text-gray-200">Menit</div>
                </div>
                <div class="bg-brand-primary p-3 rounded-lg w-20">
                    <div id="countdown-seconds" class="text-3xl font-bold text-white">0</div>
                    <div class="text-sm text-gray-200">Detik</div>
                </div>
            </div>
        </section>

        <!-- Bagian Galeri Foto -->
        <section id="galeri" class="p-8 text-center">
            <h2 class="text-3xl font-display font-bold text-brand-primary mb-6">Galeri Kami</h2>
            <div class="grid grid-cols-2 gap-4">
                <img src="cincin.jpg" alt="Galeri 1" class="w-full h-auto rounded-lg shadow-md object-cover">
                <img src="cincin.jpg" alt="Galeri 2" class="w-full h-auto rounded-lg shadow-md object-cover">
                <img src="cincin.jpg" alt="Galeri 3" class="w-full h-auto rounded-lg shadow-md object-cover">
                <img src="cincin.jpg" alt="Galeri 4" class="w-full h-auto rounded-lg shadow-md object-cover">
            </div>
        </section>

        <!-- Bagian Peta -->
        <section class="p-8 text-center">
            <h2 class="text-3xl font-display font-bold text-brand-primary mb-6">Lokasi Acara</h2>
            <p>Perum bumi karawang permai blok d7/21 rt/rw.023/006 desa warung bambu kec karawang timur</p>
            <div class="w-full h-80 rounded-lg overflow-hidden shadow-md">
                <iframe 
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3965.508717340714!2d107.3244219!3d-6.3280625!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e697703a7119e45%3A0x5ef28064c30759a3!2sPerumahan%20Bumi%20Karawang%20Permai!5e0!3m2!1sid!2sid!4v1762308556799!5m2!1sid!2sid" 
                    width="100%" 
                    height="100%" 
                    style="border:0;" 
                    allowfullscreen="" 
                    loading="lazy" 
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
            <a href="https://maps.app.goo.gl/Wxj34uR4eFGiPryq7" target="_blank" rel="noopener noreferrer" class="inline-block mt-6 bg-brand-primary text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105">
                Buka di Google Maps
            </a>
        </section>
        
        <!-- Bagian Hadiah -->
        <!-- 
          PERUBAHAN: 
          - 'bg-brand-secondary/95' diubah menjadi 'bg-brand-secondary' (solid, warna emerald)
          - Warna teks diubah agar kontras (putih/emas)
        -->
        <section class="bg-brand-secondary p-8 text-center">
            <h2 class="text-3xl font-display font-bold text-brand-primary mb-6">Hadiah Pernikahan</h2>
            <p class="text-gray-200 mb-6">
                Doa restu Anda adalah hadiah terindah bagi kami. Namun, jika Anda ingin memberikan tanda kasih, kami telah menyediakan rekening berikut:
            </p>
            <div class="bg-white p-6 rounded-lg shadow-md max-w-xs mx-auto">
                <p class="font-semibold text-lg text-brand-text">DANA</p>
                <p class="text-2xl font-bold text-brand-primary my-2">085156929634</p>
                <p class="text-brand-muted">a.n. Muhamad Aziz</p>
                <button id="copyButton" class="mt-4 bg-gray-200 text-brand-text font-semibold py-2 px-4 rounded-full text-sm transition-all hover:bg-gray-300">
                    Salin No. E-Wallet
                </button>
            </div>
        </section>

        <!-- Bagian Buku Tamu & Ucapan (Baru) -->
        <section id="rsvp" class="p-8 text-center">
            <h2 class="text-3xl font-display font-bold text-brand-primary mb-6">Buku Tamu & Ucapan</h2>
            
            <!-- Form Input -->
            <form id="rsvp-form" class="bg-white p-6 rounded-lg shadow-md text-left max-w-md mx-auto">
                <div class="mb-4">
                    <label for="nama" class="block text-sm font-bold text-brand-text mb-2">Nama Anda</label>
                    <input type="text" id="nama" name="nama" class="w-full px-3 py-2 border rounded-lg text-brand-text focus:outline-none focus:ring-2 focus:ring-brand-primary" required>
                </div>
                <div class="mb-4">
                    <label for="ucapan" class="block text-sm font-bold text-brand-text mb-2">Ucapan & Doa</label>
                    <textarea id="ucapan" name="ucapan" rows="4" class="w-full px-3 py-2 border rounded-lg text-brand-text focus:outline-none focus:ring-2 focus:ring-brand-primary" required></textarea>
                </div>
                <div class="mb-4">
                    <label class="block text-sm font-bold text-brand-text mb-2">Konfirmasi Kehadiran</label>
                    <select id="kehadiran" name="kehadiran" class="w-full px-3 py-2 border rounded-lg text-brand-text bg-white focus:outline-none focus:ring-2 focus:ring-brand-primary" required>
                        <option value="" disabled selected>Pilih Opsi</option>
                        <option value="Hadir">Hadir</option>
                        <option value="Tidak Hadir">Tidak Hadir</option>
                    </select>
                </div>
                <button type="submit" class="w-full bg-brand-primary text-white font-bold py-3 px-8 rounded-full shadow-lg transform transition-transform hover:scale-105 disabled:opacity-50">
                    Kirim Ucapan
                </button>
            </form>

            <!-- Tampilan Ucapan -->
            <div class="mt-8 text-left max-w-md mx-auto">
                <h3 id="rsvp-count" class="text-xl font-bold text-brand-text mb-4">0 Ucapan</h3>
                <!-- Ganti background list ucapan agar tidak sama dengan section RSVP -->
                <div id="guestbook-entries" class="space-y-4 max-h-96 overflow-y-auto bg-gray-100 p-4 rounded-lg">
                    <!-- Ucapan akan dimuat di sini oleh JavaScript -->
                    <p class="text-brand-muted text-center italic">Memuat ucapan...</p>
                </div>
            </div>
        </section>

        <!-- Bagian Penutup -->
        <footer class="p-12 text-center text-brand-text">
            <p class="text-brand-muted mb-6">
                Merupakan suatu kehormatan dan kebahagiaan bagi kami apabila Bapak/Ibu/Saudara/i berkenan hadir untuk memberikan doa restu kepada kami.
            </p>
            <p class="text-2xl font-semibold">Terima Kasih</p>
            <!-- Menggunakan font script -->
            <h2 class="font-script text-6xl text-brand-primary my-6">Dian & Aziz</h2>
        </footer>
        
    </main>

    <!-- Tombol Musik (Dipindahkan sedikit ke atas) -->
    <!-- Ganti 'placeholder.mp3' dengan link file musik Anda -->
    <audio id="bg-music" loop>
        <source src="songs.mp3" type="audio/mpeg">
        Browser Anda tidak mendukung elemen audio.
    </audio>
    <!-- Tombol musik diubah jadi Emas -->
    <button id="music-toggle" class="fixed bottom-20 right-4 z-40 bg-brand-primary text-white w-12 h-12 rounded-full shadow-lg flex items-center justify-center transform transition-transform hover:scale-110">
        <!-- Ikon Play (SVG) -->
        <svg id="icon-play" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z" clip-rule="evenodd"></path></svg>
        <!-- Ikon Pause (SVG) - Awalnya tersembunyi -->
        <svg id="icon-pause" class="w-6 h-6 hidden" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 012 0v4a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v4a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg>
    </button>

    <!-- Bottom Menu (Baru) -->
    <nav id="bottom-menu" class="hidden fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-white/90 backdrop-blur-sm shadow-inner-top rounded-t-2xl p-2 z-30">
        <div class="flex justify-around">
            <button data-target="hero" class="bottom-nav-button flex flex-col items-center text-brand-muted hover:text-brand-primary transition-colors">
                <!-- Ikon Home -->
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6-4h.01M12 16h.01"></path></svg>
                <span class="text-xs font-medium">Home</span>
            </button>
            <button data-target="mempelai" class="bottom-nav-button flex flex-col items-center text-brand-muted hover:text-brand-primary transition-colors">
                <!-- Ikon Mempelai (Hati) -->
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4.318 6.318a4.5 4.5 0 016.364 0L12 7.636l1.318-1.318a4.5 4.5 0 116.364 6.364L12 20.364l-7.682-7.682a4.5 4.5 0 010-6.364z"></path></svg>
                <span class="text-xs font-medium">Mempelai</span>
            </button>
            <button data-target="acara" class="bottom-nav-button flex flex-col items-center text-brand-muted hover:text-brand-primary transition-colors">
                <!-- Ikon Acara (Kalender) -->
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                <span class="text-xs font-medium">Acara</span>
            </button>
            <button data-target="galeri" class="bottom-nav-button flex flex-col items-center text-brand-muted hover:text-brand-primary transition-colors">
                <!-- Ikon Galeri (Gambar) -->
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>
                <span class="text-xs font-medium">Galeri</span>
            </button>
            <button data-target="rsvp" class="bottom-nav-button flex flex-col items-center text-brand-muted hover:text-brand-primary transition-colors">
                <!-- Ikon RSVP (Buku) -->
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path></svg>
                <span class="text-xs font-medium">Ucapan</span>
            </button>
        </div>
    </nav>


    <script>
        // Variabel global untuk interval agar bisa di-clear saat script di-reload
        if (window.countdownInterval) {
            clearInterval(window.countdownInterval);
        }

        // Menjalankan semua script setelah DOM siap
        document.addEventListener('DOMContentLoaded', function() {
            
            // --- Variabel & Elemen ---
            const openButton = document.getElementById('openButton');
            const copyButton = document.getElementById('copyButton');
            const cover = document.getElementById('cover');
            const mainContent = document.getElementById('main-content');
            const audio = document.getElementById('bg-music');
            const musicToggle = document.getElementById('music-toggle');
            const iconPlay = document.getElementById('icon-play');
            const iconPause = document.getElementById('icon-pause');
            const bottomMenu = document.getElementById('bottom-menu'); // (Baru)

            // --- Fungsi untuk Membuka Undangan ---
            const openInvitation = function() {
                if (!cover || !mainContent) return;
                
                // Sembunyikan cover dengan efek fade out
                cover.style.opacity = '0';
                setTimeout(() => {
                    cover.style.display = 'none';
                }, 1000); // Sesuaikan dengan durasi transisi
                
                // Tampilkan konten utama
                mainContent.classList.remove('hidden');
                // Tampilkan bottom menu (Baru)
                if (bottomMenu) {
                    bottomMenu.classList.remove('hidden');
                }

                // Mulai memutar musik
                if (audio) {
                    audio.play().catch(e => console.error("Audio play failed:", e));
                    iconPlay.classList.add('hidden');
                    iconPause.classList.remove('hidden');
                }
            }

            // --- Fungsi Tombol Musik ---
            const toggleMusic = function() {
                if (!audio) return;
                if (audio.paused) {
                    audio.play().catch(e => console.error("Audio play failed:", e));
                    iconPlay.classList.add('hidden');
                    iconPause.classList.remove('hidden');
                } else {
                    audio.pause();
                    iconPlay.classList.remove('hidden');
                    iconPause.classList.add('hidden');
                }
            }

            // --- Fungsi untuk Menyalin Teks (No. Rekening) ---
            const copyToClipboard = function(text) {
                if (navigator.clipboard) {
                    navigator.clipboard.writeText(text).then(() => {
                        showCopySuccess();
                    }).catch(err => {
                        fallbackCopy(text);
                    });
                } else {
                    fallbackCopy(text);
                }
            }
            
            const fallbackCopy = function(text) {
                const textArea = document.createElement('textarea');
                textArea.value = text;
                textArea.style.position = 'fixed';
                textArea.style.top = 0;
                textArea.style.left = 0;
                textArea.style.opacity = 0;
                document.body.appendChild(textArea);
                textArea.focus();
                textArea.select();
                try {
                    const successful = document.execCommand('copy');
                    if (successful) showCopySuccess();
                } catch (err) {
                    console.error('Gagal menyalin: ', err);
                }
                document.body.removeChild(textArea);
            }

            const showCopySuccess = function() {
                if (copyButton) {
                    const originalText = copyButton.innerText;
                    copyButton.innerText = 'Berhasil Disalin!';
                    copyButton.disabled = true;
                    setTimeout(() => {
                        copyButton.innerText = originalText;
                        copyButton.disabled = false;
                    }, 2000);
                }
            }

            // --- Fungsi Countdown Timer ---
            const startCountdown = function() {
                // Tanggal diubah ke 11 November 2025
                const countdownDate = new Date("2025-11-08T09:00:00").getTime();
                window.countdownInterval = setInterval(function() {
                    const now = new Date().getTime();
                    const distance = countdownDate - now;
                    const days = Math.floor(distance / (1000 * 60 * 60 * 24));
                    const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                    const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
                    const seconds = Math.floor((distance % (1000 * 60)) / 1000);

                    const elDays = document.getElementById("countdown-days");
                    const elHours = document.getElementById("countdown-hours");
                    const elMinutes = document.getElementById("countdown-minutes");
                    const elSeconds = document.getElementById("countdown-seconds");

                    if (elDays) elDays.innerText = days < 0 ? 0 : days;
                    if (elHours) elHours.innerText = hours < 0 ? 0 : hours;
                    if (elMinutes) elMinutes.innerText = minutes < 0 ? 0 : minutes;
                    if (elSeconds) elSeconds.innerText = seconds < 0 ? 0 : seconds;

                    if (distance < 0) {
                        clearInterval(window.countdownInterval);
                        const countdownEl = document.getElementById("countdown");
                        if (countdownEl) {
                            countdownEl.innerHTML = "<div class='text-xl font-bold text-brand-primary'>Acara Telah Berlangsung</div>";
                        }
                    }
                }, 1000);
            }

            // --- Fungsi Scroll untuk Bottom Menu (Baru) ---
            const handleNavClick = function(event) {
                // Cari tombol terdekat yang di-klik
                const button = event.target.closest('.bottom-nav-button');
                if (!button) return;

                const targetId = button.dataset.target;
                const targetElement = document.getElementById(targetId);

                if (targetElement) {
                    targetElement.scrollIntoView({ behavior: 'smooth' });
                }
            }

            // --- Menambahkan Event Listeners ---
            if (openButton) {
                openButton.addEventListener('click', openInvitation);
            }
            if (copyButton) {
                copyButton.addEventListener('click', function() {
                    copyToClipboard('1234567890');
                });
            }
            if (musicToggle) {
                musicToggle.addEventListener('click', toggleMusic);
            }
            // (Baru)
            if (bottomMenu) {
                bottomMenu.addEventListener('click', handleNavClick);
            }

            // --- Mulai Countdown ---
            startCountdown();

        });
    </script>

</body>
</html>




